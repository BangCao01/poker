{"ast":null,"code":"import io from 'socket.io-client';\nimport { fromEvent } from 'rxjs';\nexport class SocketService {\n  constructor() {\n    this.socket = {};\n  }\n\n  init() {\n    console.log('initiating socket service');\n    this.socket = io('localhost:8080');\n    return this;\n  } // send a message for the server to broadcast\n\n\n  send(message) {\n    console.log('emitting message: ' + message);\n    this.socket.emit('message', message);\n  }\n\n  sendLogin(message) {\n    console.log('emitting login message: ' + message);\n    this.socket.emit('login', message);\n  } // link message event to rxjs data source\n\n\n  onLoginMessage() {\n    return fromEvent(this.socket, 'loginMessage');\n  } // link message event to rxjs data source\n\n\n  onMessage() {\n    return fromEvent(this.socket, 'message');\n  } // disconnect - used when unmounting\n\n\n  disconnect() {\n    this.socket.disconnect();\n  }\n\n}","map":{"version":3,"sources":["/Users/bangcao/Desktop/Projects/ts-live-chat-demo-master/client/src/SocketService.ts"],"names":["io","fromEvent","SocketService","socket","init","console","log","send","message","emit","sendLogin","onLoginMessage","onMessage","disconnect"],"mappings":"AAAA,OAAOA,EAAP,MAAe,kBAAf;AAEA,SAASC,SAAT,QAAsC,MAAtC;AAEA,OAAO,MAAMC,aAAN,CAAoB;AAAA;AAAA,SACjBC,MADiB,GACe,EADf;AAAA;;AAGlBC,EAAAA,IAAP,GAA8B;AAC5BC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACA,SAAKH,MAAL,GAAcH,EAAE,CAAC,gBAAD,CAAhB;AACA,WAAO,IAAP;AACD,GAPwB,CASzB;;;AACOO,EAAAA,IAAP,CAAaC,OAAb,EAAyC;AACvCH,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAuBE,OAAnC;AACA,SAAKL,MAAL,CAAYM,IAAZ,CAAiB,SAAjB,EAA4BD,OAA5B;AACD;;AAEME,EAAAA,SAAP,CAAiBF,OAAjB,EAA8C;AAC5CH,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAA6BE,OAAzC;AACA,SAAKL,MAAL,CAAYM,IAAZ,CAAiB,OAAjB,EAA0BD,OAA1B;AACD,GAlBwB,CAoBzB;;;AACOG,EAAAA,cAAP,GAAmD;AACjD,WAAOV,SAAS,CAAC,KAAKE,MAAN,EAAc,cAAd,CAAhB;AACD,GAvBwB,CAyBzB;;;AACOS,EAAAA,SAAP,GAA6C;AAC3C,WAAOX,SAAS,CAAC,KAAKE,MAAN,EAAc,SAAd,CAAhB;AACD,GA5BwB,CA8BzB;;;AACOU,EAAAA,UAAP,GAA2B;AACzB,SAAKV,MAAL,CAAYU,UAAZ;AACD;;AAjCwB","sourcesContent":["import io from 'socket.io-client';\nimport { ChatMessage, LoginMessage } from './types';\nimport { fromEvent, Observable } from 'rxjs';\n\nexport class SocketService {\n  private socket: SocketIOClient.Socket = {} as SocketIOClient.Socket;\n\n  public init (): SocketService {\n    console.log('initiating socket service');\n    this.socket = io('localhost:8080');\n    return this;\n  }\n\n  // send a message for the server to broadcast\n  public send (message: ChatMessage): void {\n    console.log('emitting message: ' + message);\n    this.socket.emit('message', message);\n  }\n\n  public sendLogin(message: LoginMessage): void {\n    console.log('emitting login message: ' + message);\n    this.socket.emit('login', message);\n  }\n\n  // link message event to rxjs data source\n  public onLoginMessage (): Observable<LoginMessage> {\n    return fromEvent(this.socket, 'loginMessage');\n  }\n\n  // link message event to rxjs data source\n  public onMessage (): Observable<ChatMessage> {\n    return fromEvent(this.socket, 'message');\n  }\n\n  // disconnect - used when unmounting\n  public disconnect (): void {\n    this.socket.disconnect();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}