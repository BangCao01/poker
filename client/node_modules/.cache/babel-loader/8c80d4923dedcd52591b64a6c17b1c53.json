{"ast":null,"code":"var _jsxFileName = \"/Users/bangcao/Desktop/Projects/ts-live-chat-demo-master/client/src/games/Poker.tsx\";\nimport React from 'react'; // import logo from './logo.svg';\n// import './App.css';\n\nimport { ChatContext } from '../ChatContext';\nimport * as PIXI from 'pixi.js';\nimport myImage from '../../public/assets/cards.png';\n\nclass Poker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pixi_cnt = null;\n    this.canvasApp = null;\n    this.avatar = null;\n    this.state = {\n      messages: [{\n        message: 'Welcome! Type a message and press Send Message to continue the chat.',\n        author: 'Bot'\n      }],\n      input: ''\n    };\n\n    this.updatePixiCnt = element => {\n      // the element is the DOM object that we will use as container to add pixi stage(canvas)\n      this.pixi_cnt = element; //now we are adding the application to the DOM element which we got from the Ref.\n\n      if (this.pixi_cnt && this.pixi_cnt.children.length <= 0) {\n        this.pixi_cnt.appendChild(this.state.app.view); //The setup function is a custom function that we created to add the sprites. We will this below\n\n        this.setup();\n      }\n    };\n\n    this.setup = () => {\n      this.canvasApp.loader.add(\"avatar\", myImage).load(this.initialize);\n    };\n\n    this.initialize = () => {\n      //We will create a sprite and then add it to stage and (0,0) position\n      this.avatar = new PIXI.Sprite(this.canvasApp.loader.resources[\"avatar\"].texture);\n      this.state.app.stage.addChild(this.avatar);\n    };\n\n    this.pixi_cnt = null;\n    this.canvasApp = new PIXI.Application({\n      width: 600,\n      height: 600,\n      transparent: false\n    });\n  }\n\n  componentDidMount() {\n    //initiate socket connection\n    this.context.init();\n    const observable = this.context.onMessage();\n    observable.subscribe(m => {\n      let messages = this.state.messages;\n      messages.push(m);\n      this.setState({\n        messages: messages\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.context.disconnect();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      ref: this.updatePixiCnt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    });\n  }\n\n}\n\nPoker.contextType = ChatContext;\nexport default Poker;","map":{"version":3,"sources":["/Users/bangcao/Desktop/Projects/ts-live-chat-demo-master/client/src/games/Poker.tsx"],"names":["React","ChatContext","PIXI","myImage","Poker","Component","constructor","props","pixi_cnt","canvasApp","avatar","state","messages","message","author","input","updatePixiCnt","element","children","length","appendChild","app","view","setup","loader","add","load","initialize","Sprite","resources","texture","stage","addChild","Application","width","height","transparent","componentDidMount","context","init","observable","onMessage","subscribe","m","push","setState","componentWillUnmount","disconnect","render","contextType"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;AACA;;AAEA,SAASC,WAAT,QAA4B,gBAA5B;AACA,OAAO,KAAKC,IAAZ,MAAsB,SAAtB;AACA,OAAOC,OAAP,MAAoB,+BAApB;;AAEA,MAAMC,KAAN,SAAoBJ,KAAK,CAACK,SAA1B,CAAoC;AAclCC,EAAAA,WAAW,CAACC,KAAD,EAAY;AACrB,UAAMA,KAAN;AADqB,SAZhBC,QAYgB,GAZD,IAYC;AAAA,SAXhBC,SAWgB,GAXA,IAWA;AAAA,SAVhBC,MAUgB,GAVF,IAUE;AAAA,SATvBC,KASuB,GATJ;AACjBC,MAAAA,QAAQ,EAAE,CACR;AACEC,QAAAA,OAAO,EAAE,sEADX;AAEEC,QAAAA,MAAM,EAAE;AAFV,OADQ,CADO;AAOjBC,MAAAA,KAAK,EAAE;AAPU,KASI;;AAAA,SA4BvBC,aA5BuB,GA4BPC,OAAD,IAAiB;AAC9B;AACA,WAAKT,QAAL,GAAgBS,OAAhB,CAF8B,CAG9B;;AACA,UAAG,KAAKT,QAAL,IAAiB,KAAKA,QAAL,CAAcU,QAAd,CAAuBC,MAAvB,IAA+B,CAAnD,EAAsD;AACnD,aAAKX,QAAL,CAAcY,WAAd,CAA0B,KAAKT,KAAL,CAAWU,GAAX,CAAeC,IAAzC,EADmD,CAEnD;;AACA,aAAKC,KAAL;AACF;AAEH,KAtCuB;;AAAA,SAwCxBA,KAxCwB,GAwChB,MAAM;AACb,WAAKd,SAAL,CAAee,MAAf,CACMC,GADN,CACU,QADV,EACmBtB,OADnB,EAEMuB,IAFN,CAEW,KAAKC,UAFhB;AAGD,KA5CwB;;AAAA,SA6CzBA,UA7CyB,GA6CZ,MAAM;AAChB;AACA,WAAKjB,MAAL,GAAc,IAAIR,IAAI,CAAC0B,MAAT,CAAgB,KAAKnB,SAAL,CAAee,MAAf,CAAsBK,SAAtB,CAAgC,QAAhC,EAA0CC,OAA1D,CAAd;AACA,WAAKnB,KAAL,CAAWU,GAAX,CAAeU,KAAf,CAAqBC,QAArB,CAA8B,KAAKtB,MAAnC;AAEF,KAlDwB;;AAErB,SAAKF,QAAL,GAAgB,IAAhB;AACA,SAAKC,SAAL,GAAiB,IAAIP,IAAI,CAAC+B,WAAT,CAAqB;AAACC,MAAAA,KAAK,EAAE,GAAR;AAAaC,MAAAA,MAAM,EAAE,GAArB;AAA0BC,MAAAA,WAAW,EAAC;AAAtC,KAArB,CAAjB;AACD;;AAEDC,EAAAA,iBAAiB,GAAI;AAEnB;AACA,SAAKC,OAAL,CAAaC,IAAb;AAEA,UAAMC,UAAU,GAAG,KAAKF,OAAL,CAAaG,SAAb,EAAnB;AAEAD,IAAAA,UAAU,CAACE,SAAX,CAAsBC,CAAD,IAAoB;AACvC,UAAI/B,QAAQ,GAAG,KAAKD,KAAL,CAAWC,QAA1B;AAEAA,MAAAA,QAAQ,CAACgC,IAAT,CAAcD,CAAd;AACA,WAAKE,QAAL,CAAc;AAAEjC,QAAAA,QAAQ,EAAEA;AAAZ,OAAd;AACD,KALD;AASD;;AAEDkC,EAAAA,oBAAoB,GAAI;AACtB,SAAKR,OAAL,CAAaS,UAAb;AACD;;AA0BHC,EAAAA,MAAM,GAAG;AACL,WAAO;AAAK,MAAA,GAAG,EAAE,KAAKhC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AApEiC;;AAA9BZ,K,CACG6C,W,GAAchD,W;AAsEvB,eAAeG,KAAf","sourcesContent":["import React from 'react';\n// import logo from './logo.svg';\n// import './App.css';\nimport { ChatMessage, ChatState } from '../types';\nimport { ChatContext } from '../ChatContext';\nimport * as PIXI from 'pixi.js';\nimport myImage from '../../public/assets/cards.png';\n\nclass Poker extends React.Component {\n  static contextType = ChatContext;\n  public pixi_cnt:any = null;\n  public canvasApp:any = null;\n  public avatar: any = null;\n  state: ChatState = {\n    messages: [\n      {\n        message: 'Welcome! Type a message and press Send Message to continue the chat.',\n        author: 'Bot'\n      }\n    ],\n    input: ''\n  }\n  constructor(props:any) {\n    super(props);\n    this.pixi_cnt = null;\n    this.canvasApp = new PIXI.Application({width: 600, height: 600, transparent:false})\n  }\n\n  componentDidMount () {\n\n    //initiate socket connection\n    this.context.init();\n\n    const observable = this.context.onMessage();\n\n    observable.subscribe((m: ChatMessage) => {\n      let messages = this.state.messages;\n\n      messages.push(m);\n      this.setState({ messages: messages });\n    });\n\n   \n\n  }\n\n  componentWillUnmount () {\n    this.context.disconnect();\n  }\n\n  updatePixiCnt= (element:any) => {\n    // the element is the DOM object that we will use as container to add pixi stage(canvas)\n    this.pixi_cnt = element;\n    //now we are adding the application to the DOM element which we got from the Ref.\n    if(this.pixi_cnt && this.pixi_cnt.children.length<=0) {\n       this.pixi_cnt.appendChild(this.state.app.view);\n       //The setup function is a custom function that we created to add the sprites. We will this below\n       this.setup();\n    }\n\n };\n\n setup = () => {\n  this.canvasApp.loader\n       .add(\"avatar\",myImage)\n       .load(this.initialize);\n};\ninitialize = () => {\n   //We will create a sprite and then add it to stage and (0,0) position\n   this.avatar = new PIXI.Sprite(this.canvasApp.loader.resources[\"avatar\"].texture);\n   this.state.app.stage.addChild(this.avatar);\n\n};\n  \nrender() {\n    return <div ref={this.updatePixiCnt} />;\n  }\n}\n\nexport default Poker;\n"]},"metadata":{},"sourceType":"module"}